---
interface Props {
    title: string;
    album: string;
    artist: string;
    explciit: boolean;
    id: string;
    coverURL: string;
}

import spotifyIcon from "../assets/spotify_icon.svg";
import spotifyLogo from "../assets/spotify_logo.svg";
import copyIcon from "../assets/copy.svg";
import ExplicitIcon from "../components/ExplicitIcon.astro";
---

<article
    class="text-left shadow-outline2xl rounded-3xl overflow-hidden clearfix m-auto w-full"
    transition:name="card"
>
    <!-- <img
        src={Astro.props.coverURL}
        class="float-left size-32 rounded-lg mr-4"
    /> -->
    <div class="flex items-center">
        <img
            src={Astro.props.coverURL}
            alt=`loading...`
            class="rounded-lg shadow-xl ml-4 my-4 w-32"
        />
        <div class="overflow-hidden mt-2">
            <div
                class="overflow-hidden [mask-image:linear-gradient(to_right,transparent,#000_1rem,#000_90%,transparent)]"
            >
                <div
                    class="flex flex-row items-center gap-2 pl-4 mb-2 mt-0 animate-scroll animation-delay-halfway w-[34rem] h-10 max-w-full min-w-0"
                >
                    <h2 class="whitespace-nowrap leading-3 m-0">
                        {Astro.props.title}
                    </h2>

                    { Astro.props.explciit ? (
                        <ExplicitIcon />
                    ) : null}
                    
                </div>
            </div>

            <p class="pl-4">
                <b>{Astro.props.album}</b><br />
                {Astro.props.artist}
            </p>
        </div>
    </div>

    <div class="px-4 pb-4 flex flex-row gap-4">
        <a
            class="flex-1 no-underline duration-500"
            href=`https://open.spotify.com/track/${Astro.props.id}`
        >
            <button
                class="w-full p-4 rounded-lg shadow-outlinexl hover:shadow-outline2xl transition-shadow duration-500 h-16 text-white flex flex-row items-center justify-center gap-3"
            >
                <img src={spotifyIcon.src} class="h-7" alt="Spotify icon" />
                <p class="mb-0">listen on spotify</p>
            </button>
        </a>
        <a class="flex-1 no-underline duration-500" id="copy-link">
            <button
                class="w-full p-4 rounded-lg flex-1 shadow-outlinexl hover:shadow-outline2xl transition-shadow duration-500 h-16 text-white flex flex-row items-center justify-center gap-3"
            >
                <img src={copyIcon.src} class="h-7" alt="Copy icon"/>
                <p class="mb-0" id="copy-text">copy link</p>
            </button>
        </a>
    </div>
</article>

<div class="flex flex-row justify-center items-center gap-2 mt-4" transition:name="card-acknowledgment ">
    <p class="mt-4 text-sm">music data provided by</p>
    <img src={spotifyLogo.src} class="h-6" alt="Spotify icon" />
</div>


<script>
    const copyLinkElement = document.getElementById(
        "copy-link"
    ) as HTMLLinkElement;
    copyLinkElement.onclick = function () {
        const copyTextElement = document.getElementById(
            "copy-text"
        ) as HTMLParagraphElement;
        navigator.clipboard.writeText(window.location.href);
        copyTextElement.innerText = "link copied!";
    };
</script>

<style>
    .clearfix::after {
        content: "";
        clear: both;
        display: table;
    }
</style>
